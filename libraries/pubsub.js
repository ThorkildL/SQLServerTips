define([],function(){"use strict";var s={},c={},e=-1;function f(n){for(var r in n)if(n.hasOwnProperty(r))return!0;return!1}function a(n,r,t){try{n(r,t)}catch(n){setTimeout((e=n,function(){throw e}),0)}var e}function p(n,r,t){n(r,t)}function y(n,r,t,e){var i,o=c[r],u=e?p:a;if(c.hasOwnProperty(r))for(i in o)o.hasOwnProperty(i)&&u(o[i],n,t)}function t(n,r,t,e){n="symbol"==typeof n?n.toString():n;var i,o,u,e=(o=r,u=e,function(){var n=String(i),r=n.lastIndexOf(".");for(y(i,i,o,u);-1!==r;)r=(n=n.substr(0,r)).lastIndexOf("."),y(i,n,o,u)});return!!function(n){for(var r=String(n),t=Boolean(c.hasOwnProperty(r)&&f(c[r])),e=r.lastIndexOf(".");!t&&-1!==e;)e=(r=r.substr(0,e)).lastIndexOf("."),t=Boolean(c.hasOwnProperty(r)&&f(c[r]));return t}(i=n)&&(!0===t?e():setTimeout(e,0),!0)}return s.publish=function(n,r){return t(n,r,!1,s.immediateExceptions)},s.publishSync=function(n,r){return t(n,r,!0,s.immediateExceptions)},s.subscribe=function(n,r){if("function"!=typeof r)return!1;n="symbol"==typeof n?n.toString():n,c.hasOwnProperty(n)||(c[n]={});var t="uid_"+String(++e);return c[n][t]=r,t},s.subscribeOnce=function(n,r){var t=s.subscribe(n,function(){s.unsubscribe(t),r.apply(this,arguments)});return s},s.clearAllSubscriptions=function(){c={}},s.clearSubscriptions=function(n){for(var r in c)c.hasOwnProperty(r)&&0===r.indexOf(n)&&delete c[r]},s.unsubscribe=function(n){var r,t,e,i="string"==typeof n&&(c.hasOwnProperty(n)||function(n){for(var r in c)if(c.hasOwnProperty(r)&&0===r.indexOf(n))return!0;return!1}(n)),o=!i&&"string"==typeof n,u="function"==typeof n,f=!1;if(!i){for(r in c)if(c.hasOwnProperty(r)){if(t=c[r],o&&t[n]){delete t[n],f=n;break}if(u)for(e in t)t.hasOwnProperty(e)&&t[e]===n&&(delete t[e],f=!0)}return f}s.clearSubscriptions(n)},s});